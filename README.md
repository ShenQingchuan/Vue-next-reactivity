# ã€ŒDeprecatedã€æˆ‘çš„ Vue-next3.0 å®éªŒç”°

## Vue-next Reactivity éƒ¨åˆ†ä»£ç é‡ç°åŠç†è§£

### å°‘è¯´åºŸè¯ï¼Œè®©æˆ‘å…ˆçœ‹çœ‹æµ‹è¯•ç»“æœ

å°‘å¹´è¿™ä¹ˆå¿ƒæ€¥å˜›ï¼Ÿé‚£è¯·ç¡®ä¿ä½ æœ‰å®Œæ•´çš„ `node.js >12`, `typescript 3.6+`ï¼Œ

å¦å¤–æ¨èï¼š`yarn 1.17+`, ä½¿ç”¨ VSCodeï¼Œå¹¶è£…å¥½ `Code-Runner`æ’ä»¶ã€‚
æ‰“å¼€é¡¹ç›®ï¼ŒæŒ‰å³ä¸Šè§’çš„ **è¿è¡Œå°ä¸‰è§’å½¢**åï¼ŒFire it upï¼

å¦å¤–åœ¨ä¸ç¼–è¯‘æ‰“åŒ… typescript æ—¶ï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯åŠ¨æˆ‘å†™çš„æµ‹è¯•ï¼š

```bash
# ä½¿ç”¨ npm
npm run dev-test

# ä½¿ç”¨ yarn
yarn dev-test
```

### æºè‡ªæ•™ç¨‹

ğŸ‘‡æˆ³è¿™é‡Œäº†è§£æ›´å¤šï¼~

[ã€ç å³°æ¶æ„å¸ˆã€‘ä»é›¶å®ç°Vue3.0æºç ä¸­çš„å“åº”å¼å®ç°åŸç†](https://www.bilibili.com/video/av70281743?from=search&seid=9995224344828633568)

[ã€Vue 2.6.x Object.defineProperty å®ç°æ•°æ®å“åº”å¼çš„è§£æã€‘](https://www.bilibili.com/video/av70436740/?p=30)

### è‡ªå·±çš„æ€è€ƒä¸æ”¹åŠ¨

é¦–å…ˆæºæ•™ç¨‹æ˜¯åªé‡‡ç”¨äº† Javascript ä¹¦å†™ï¼Œå¹¶æ²¡æœ‰å®é™…å°¤é›¨æºªå¤§å¤§è½¬æŠ• Typescript çš„çœŸå¿ƒã€‚

æ‰€ä»¥æˆ‘è¿™é‡Œç»“åˆæ•™ç¨‹çš„æ€è·¯ï¼Œå¹¶èŠ‚é€‰éƒ¨åˆ† [`vue-next`](https://github.com/vuejs/vue-next) çš„ç›¸å…³æºç ã€‚

å…·ä½“ç›®å½•åœ¨ **`vue-next ä»“åº“çš„ /packages/reactivity/src/reactive.ts`**ã€‚

#### æˆ‘éƒ½ç¼©ç•¥äº†ä»€ä¹ˆ

> **è¯»æºç çš„æ ¸å¿ƒæ€æƒ³æ˜¯è¦ï¼šåŒ–ç¹ä¸ºç®€ã€æ±²å–å·±ç”¨ï¼**
>
> æ‰€ä»¥åƒä¸‡ä¸è¦å¤ªè¿‡æ²‰è¿·æ¯ä¸€è¡Œä»£ç å“¦~

ç”±äºæœ¬æ¬¡å®éªŒçš„æ ¸å¿ƒæ˜¯ï¼š**æ¢ç´¢ Vue-next çš„æ•°æ®å“åº”å¼çš„æ ¸å¿ƒæ€æƒ³**ï¼Œ
æ‰€ä»¥åªæ˜¯å¯¹ reactive æ–¹æ³•å®ç°äº†ä¸ªä¸ƒä¸ƒå…«å…«...

å…¶å®æ‹œè¯»äº†ä¸€ä¸‹æºç åä½ ä¼šå‘ç°ï¼Œæºç å®ç°ä¸­è¿˜åŒºåˆ†å‡ºäº† **`readOnly`**ã€
æŠŠåˆ›å»ºå“åº”å¼å¯¹è±¡ä¹Ÿå°è£…æˆäº†å•ç‹¬çš„å‡½æ•°ã€‚

#### è¯»æºç æœŸé—´ä¸€ä¸ªå°å¿ƒå¾—

ä»ä¹‹å‰çš„ **æ‰‹å†™Redux** åˆ°è¿™ä¸ªå°å®éªŒï¼Œæˆ‘æ·±å…¥è¯»æºç çš„ç»å†çœŸçš„å¾ˆæœ‰é™ï¼Œ
ä½†è·Ÿç€ä¸€äº›åªç”¨ JavaScript å®ç°çš„æ•™ç¨‹ã€ä½ è‡ªå·±ç¡¬ç”¨ Typescript è·Ÿç€å†™ï¼Œ
å¹¶æ—¶æ—¶åˆ»åˆ»æ³¨æ„ç±»å‹ã€ä½ ä¼šæ”¶è·å¾ˆå¤šï¼

åœ¨æ­¤æœŸé—´ä½ ä¼šå‘ç°ï¼ŒæŸä¸ªæ–¹æ³•éœ€è¦ä¾èµ–ä»€ä¹ˆã€å¾—åˆ°ä»€ä¹ˆï¼Œè¿›è€Œç†è§£è¿™ä¸ªæ–¹æ³•æ˜¯åšä»€ä¹ˆçš„ã€‚
å½“ç„¶ä¹Ÿå¤šäºäº† Visual Studio Code å¼ºå¤§çš„æç¤ºã€‚

å› è€Œæˆ‘èƒ½æ— ä¼¤åœ°å°†ä¸€äº›å…³è”çš„å‡½æ•°ã€å£°æ˜è¿ç§»åˆ°æˆ‘çš„é¡¹ç›®ä¸­ï¼Œä¸”å¹¶ä¸æŠ¥é”™ã€‚

#### çœ‹å®Œè§†é¢‘ï¼Œè¯·å†è‡ªè¡Œå®ç°ä¸€é

> å®è·µæ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†ã€‚

å¦‚æœä¸è‡ªå·±å°è¯•ï¼Œå“ªæ€•æˆ‘çš„æ³¨é‡Šå†™çš„å†æ¸…æ¥šï¼Œé‚£ä¹Ÿæ˜¯æˆ‘åœ¨å¯¹ä»£ç ä¸æ–­åšå‡ºæ›´æ”¹ï¼Œ
æœ€ååŠ ä¸Šå»çš„æè¿°ç½¢äº†ã€‚


## æ¥ä¸‹æ¥æƒ³å®ç°çš„ï¼š

- (âˆš) åœ¨ `branch: vue2`å½“ä¸­å…ˆç”¨ Javascript å®ç°ä¸€ä¸‹ç¼–è¯‘DOMï¼Œæ¸²æŸ“æ’å€¼è¡¨è¾¾å¼ä¸­çš„å€¼å…¶è¿‡ç¨‹...
- (focusing) åœ¨ `branch: vue3api`å½“ä¸­å°é²œä½¿ç”¨ `vue create vue3api` åˆ›å»ºäº†ä¸€ä¸ª Typescript çš„ Vue2.x é¡¹ç›®ï¼Œ

    ä¼šä¸ºæ­¤å†™ä¸€ä»½è¾ƒç¨³è¯¦ç»†çš„æ–‡æ¡£...

    **ä½†æˆ‘ä»¬å¹¶ä¸ä¼šä½¿ç”¨è¿‡æ—¶çš„ `Class-style-component-decorator`**ï¼Œå½“ä½ ä½¿ç”¨ VueCLI 4.0å¹¶åœ¨è‡ªå®šä¹‰é€‰æ‹©é¢„é…ç½®æ’ä»¶æ—¶ï¼Œé€‰æ‹©äº†Typescriptï¼Œä¼šæç¤ºä½ æ˜¯å¦é€‰æ‹© `Class-style-component-decorator (Y/n)`ï¼Œé»˜è®¤ç°åœ¨è¿˜æ˜¯Yesï¼Œæ‰€ä»¥åƒä¸‡ä¸è¦æ‰‹è´±ç›´æ¥å›è½¦ï¼

    åˆ›å»ºå¥½åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ï¼š

    ```bash
    npm install --save @vue/composition-api
    # æˆ–è€…
    yarn add @vue/composition-api
    ```

    å¹¶åœ¨ `main.ts` ä¸­ï¼š

    ```ts
    import VueCompositionApi from '@vue/composition-api';

    Vue.use(VueCompositionApi);
    ```

    å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ VSCodeï¼Œä¸”ä½¿ç”¨äº† Vetur æ’ä»¶ï¼Œ
    é‚£ä¹ˆè¯·ç‚¹å‡» File -> Preferences -> Settingsï¼Œ
    æœç´¢ `Vetur.useWorkSpaceDependencies`ï¼Œ
    è¿™æ‰èƒ½ä¸ºä½ ç¼–å†™ `.vue` æ–‡ä»¶ä¸­ `<script lang="ts">` çš„å†…å®¹æä¾›è‰¯å¥½çš„ intellisense

    ```ts
    import { createComponent, ref } from '@vue/composition-api';

    export default createComponent({
        name: 'SomeComponent',
        props: {
            haha: String,
        },
        setup(props) {
            /* ...è¿™é‡Œä¼šæ˜¯ Composition API çš„ä¸»è¦èˆå° */
            return {  };
        },
    });
    ```
